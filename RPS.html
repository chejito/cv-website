<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, Scissors</title>
</head>
<body>
    <script>
        function computerPlay(){
            let num = Math.floor(Math.random() * 3);
            if (num == 1){
                return 'piedra';
            } else if (num == 2){
                return 'papel';
            }else {
                return 'tijera'
            }
        }

        function playRound(playerSelection, computerSelection) {

            let tie = "¡Empate! Nadie gana (" + playerSelection + " contra " + computerSelection + ")";
            let won = "¡Ganaste! " + playerSelection + " vence a " + computerSelection;
            let lose = "¡Perdiste! " + computerSelection + " vence a " + playerSelection;
            if (playerSelection != computerSelection) {
                if (playerSelection == "piedra") {
                    if (computerSelection == "tijera") {
                        playerWins += 1;
                        return won;
                    } else {
                        computerWins += 1;
                        return lose;
                    }              
                } else if (playerSelection == "papel") {
                    if (computerSelection == "tijera") {
                        computerWins += 1;
                        return lose;
                    } else {
                        playerWins += 1;
                        return won;
                    }                
                } else {
                    if (computerSelection == "piedra") {
                        computerWins += 1;
                        return lose;
                    } else {
                        playerWins += 1;
                        return won;
                    }                
                }
            } else {
                return tie;
            }
        }
            
        let playerWins = 0;
        let computerWins = 0;

        function game() {            
            for (let i = 0; i < 5; i++){
                let playerSelection = prompt("Introduce Piedra/Papel/Tijera para jugar (" + (5-i) + " de 5 intentos restantes): ").toLowerCase();                
                let computerSelection = computerPlay();
                console.log("Máquina jugó " + computerSelection);
                console.log(playRound(playerSelection, computerSelection));
            }
        }

        game();

        let finalResult = " " + playerWins + " puntos - " + computerWins + " puntos"

        if (playerWins > computerWins) {
            alert("¡Ganaste!" + finalResult);
        } else if (playerWins < computerWins) { 
            alert("¡Perdiste!" + finalResult);
        } else {
            alert("¡Teneis un empate!" + finalResult);
        }
                
    </script>
</body>
</html>